<mat-toolbar class="align-between">
  <div class="d-flex">
    <a class="header-item pr-3 align-self-center text-decoration-none hyperlink" style="color: #D32F42;">
      <img src="{{ assetsUrl + 'images/logo.svg' }}" class="logo pr-2" alt="{{ 'bbv Pantry' }}" />
      App
    </a>
    <button mat-icon-button aria-label="Settings" (click)="menu.toggle()" #buttonMenu>
      <!-- <button *ngIf="isLogged && authService.isAdmin" mat-icon-button aria-label="Settings" [matMenuTriggerFor]="spaces"> -->

      <mat-icon>menu</mat-icon>
    </button>
    <!-- <div *ngIf="isLogged && !authService.isAdmin">
      <button mat-raised-button aria-label="Settings" color="primary" (click)="goToUser()" class="mx-2">
        Order
      </button>
      <button mat-raised-button aria-label="Settings" color="primary" (click)="goToUserHistory()" class="mx-2">
        History
      </button>
    </div> -->
    <!-- <mat-menu #spaces="matMenu">
      <button mat-menu-item *ngIf="authService.isAdmin" (click)="goToAdmin()"
        [matMenuTriggerFor]="adminSection">Admin</button>
      <button mat-menu-item [matMenuTriggerFor]="userSection">User</button>
    </mat-menu>
    <mat-menu #adminSection="matMenu">
      <button mat-menu-item *ngIf="authService.isAdmin" (click)="goToRestaurant()">Restaurant</button>
      <button mat-menu-item *ngIf="authService.isAdmin" (click)="goToMenu()">Menu</button>
      <button mat-menu-item *ngIf="authService.isAdmin" (click)="goToBooking()">Booking</button>
      <button mat-menu-item *ngIf="authService.isAdmin" (click)="goToOrder()">Order</button>
      <button mat-menu-item *ngIf="authService.isAdmin" (click)="goToUserManagement()">User Management</button>
    </mat-menu>
    <mat-menu #userSection="matMenu">
      <button mat-menu-item (click)="goToUser()">Order</button>
      <button mat-menu-item (click)="goToUserHistory()">History</button>
    </mat-menu> -->
  </div>
  <span class="spacer"></span>
  <div *ngIf="haveLogin || isLogged">
    <p class="m-0 px-3" [matMenuTriggerFor]="belowMenu">
      <button mat-mini-fab *ngIf="loggedUser"
        matTooltip="{{ loggedUser.displayName ? loggedUser.displayName + ' - ' : '(empty) - ' }}{{ loggedUser.email }}">{{profileName}}</button>
      <button *ngIf="!loggedUser" mat-mini-fab matTooltip="Login">Login</button>
    </p>
    <mat-menu #belowMenu="matMenu" yPosition="below">
      <button mat-menu-item *ngIf="loggedUser" (click)="profile()">Profile</button>
      <button mat-menu-item *ngIf="loggedUser" color="accent" (click)="logOut()">Logout</button>
      <button mat-menu-item *ngIf="!loggedUser" color="accent" (click)="logIn()">Login</button>
      <button mat-menu-item *ngIf="!loggedUser" color="accent" (click)="gotoRegister()">Register</button>
    </mat-menu>
  </div>


</mat-toolbar>
<mat-sidenav-container class="example-container" [hasBackdrop]="true">
  <mat-sidenav #menu [mode]='over' class='slide-bar-menu'>
    <mat-accordion>
      <!-- <ng-template #myAppMenu> -->
      <mat-list>
        <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('wiki')}" (click)="gotoWiki()">Wiki bbv
          VN
        </mat-list-item>
        <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('pm-web')}" (click)="gotoPmWeb()">PM Web
        </mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('project-planner')}"
          (click)="gotoPlanner()">Project Planner</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item class="menu-item" [ngClass]="{active: menuSelectedName === 'leave-request'}"
          (click)="redirect({routeName: 'leave-request', routeRedirect: ['user', 'plugins'], url: 'https://bbvsoftwareservices.sharepoint.com/teams/vn/Lists/LeaveRequest/NewForm.aspx'})">
          Leave Request</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item class="menu-item" [ngClass]="{active: menuSelectedName === 'bug-zilla'}"
          (click)="redirect({routeName: 'bug-zilla', routeRedirect: ['user', 'plugins'], url: 'https://bugzilla.bbv.ch/bbvIssues/'})">
          Bug Zilla</mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item class="menu-item" class='disabled'>
          Performance Review
        </mat-list-item>
        <mat-divider></mat-divider>
        <mat-list-item class=" menu-item" class="disabled">Proficiency Evaluation</mat-list-item>
        <mat-divider></mat-divider>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title (click)='haveLogin = true' (click)="gotoPantry()">
              Pantry
            </mat-panel-title>
            <!-- <mat-panel-description>
                      Currently I am {{panelOpenState ? 'open' : 'closed'}}
                    </mat-panel-description> -->
          </mat-expansion-panel-header>
          <mat-list *ngIf="!authService.isAdmin else adminMenu">
            <mat-list-item class="menu-item" *ngIf="isLogged" [ngClass]="{active: isActiveMenuItem('order')}"
              (click)="gotoUserOrder()">Order</mat-list-item>
            <mat-list-item class="menu-item" *ngIf="isLogged" [ngClass]="{active: isActiveMenuItem('history')}"
              (click)="goToUserHistory()">History</mat-list-item>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title (click)="goToMenuHappyHours()">
                  Happy hour
                </mat-panel-title>
              </mat-expansion-panel-header>
              <!-- <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('happy-hours')}"
                    (click)="goToMenuHappyHours()">Happy hour</mat-list-item> -->
              <mat-list>
                <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('registers')}"
                  (click)="goToRegisters()">Registers</mat-list-item>
              </mat-list>
            </mat-expansion-panel>

          </mat-list>
          <ng-template #adminMenu>
            <mat-list>
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    User
                  </mat-panel-title>
                  <!-- <mat-panel-description>
                                  Currently I am {{panelOpenState ? 'open' : 'closed'}}
                                </mat-panel-description> -->
                </mat-expansion-panel-header>
                <mat-list>
                  <mat-list-item class="menu-item" *ngIf="isLogged" [ngClass]="{active: isActiveMenuItem('order')}"
                    (click)="gotoUserOrder()">Order</mat-list-item>
                  <mat-list-item class="menu-item" *ngIf="isLogged" [ngClass]="{active: isActiveMenuItem('history')}"
                    (click)="goToUserHistory()">History</mat-list-item>
                  <mat-expansion-panel>
                    <mat-expansion-panel-header>
                      <mat-panel-title (click)="goToMenuHappyHours()">
                        Happy hour
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <!-- <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('happy-hours')}"
                      (click)="goToMenuHappyHours()">Happy hour</mat-list-item> -->
                    <mat-list>
                      <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('registers')}"
                        (click)="goToRegisters()">Registers</mat-list-item>
                    </mat-list>
                  </mat-expansion-panel>
                </mat-list>

              </mat-expansion-panel>
              <mat-expansion-panel *ngIf="authService.isAdmin">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Admin
                  </mat-panel-title>
                  <!-- <mat-panel-description>
                                Type your name and age
                              </mat-panel-description> -->
                </mat-expansion-panel-header>
                <mat-list>
                  <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('restaurant')}"
                    (click)="goToRestaurant()">Restaurant
                  </mat-list-item>

                  <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('menu')}" (click)="goToMenu()">
                    Menu</mat-list-item>

                  <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('booking')}"
                    (click)="goToBooking()">Booking
                  </mat-list-item>

                  <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('admin/order')}"
                    (click)="goToOrder()">Order
                  </mat-list-item>

                  <mat-list-item class="menu-item" [ngClass]="{active: isActiveMenuItem('user-management')}"
                    (click)="goToUserManagement()">User
                    Management
                  </mat-list-item>
                </mat-list>
              </mat-expansion-panel>
              <!-- <mat-list-item class="menu-item" *ngIf="isLogged" (click)="goToUser()">Order</mat-list-item>
                    <mat-divider></mat-divider>
                    <mat-list-item class="menu-item" *ngIf="isLogged" (click)="goToUserHistory()">History</mat-list-item>
                    <mat-list-item class="menu-item" (click)="goToMenuHappyHours()">Menu</mat-list-item>
                    <mat-list-item class="menu-item" (click)="goToRegisters()">Registers</mat-list-item> -->
            </mat-list>

          </ng-template>
        </mat-expansion-panel>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Plugins
              <!-- <mat-icon class="success mat-icon notranslate material-icons mat-icon-no-color" role="img"
                (click)='showPopupAddPluginItem()' title="Add Plugin">playlist_add
              </mat-icon> -->
            </mat-panel-title>
            <!-- <mat-panel-description>
                              Currently I am {{panelOpenState ? 'open' : 'closed'}}
                            </mat-panel-description> -->
          </mat-expansion-panel-header>
          <mat-list>
            <mat-list-item *ngFor="let menu of menuItems" class="menu-item"
              [ngClass]="{active: (menu.routeName === menuSelectedName)}" (click)="redirect(menu)">
              <div class="w-100 d-flex align-items-center justify-content-between">
                <span>{{menu.name}}</span>
                <mat-icon class="success mat-icon notranslate material-icons mat-icon-no-color red-color" role="img"
                  (click)='removePlugin(menu)' title="Remove Plugin">remove_circle_outline
                </mat-icon>
              </div>
            </mat-list-item>
            <mat-list-item>
              <div class="w-100 d-flex align-items-center justify-content-center">
                <mat-icon class="success mat-icon notranslate material-icons mat-icon-no-color" role="img"
                  (click)='showPopupAddPluginItem()' title="Add Plugin">add_circle_outline
                </mat-icon>
              </div>
            </mat-list-item>
          </mat-list>
        </mat-expansion-panel>
      </mat-list>
      <!-- </ng-template> -->

    </mat-accordion>
  </mat-sidenav>
  <mat-sidenav-content class="container-full">
    <div class="container-fluid">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
<app-notification></app-notification>
<div *ngIf="isLoading" class="background">
  <mat-spinner class="spinner" strokeWidth="5" [diameter]="60"></mat-spinner>
</div>

<div class="footer">© 2019 by (Thanh Nguyen - Toan Nguyen), Release 1.0.0</div>